
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ARPEGGIO Stroke Trial Eligibility</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f5faff; color: #333; }
    h1, h2 { color: #00557f; }
    .logo-bar { display: flex; justify-content: space-around; align-items: center; margin-bottom: 30px; }
    .logo-bar img { height: 60px; }
    .section { margin-bottom: 25px; }
    label { display: block; margin-bottom: 10px; }
    .radio-group { margin-bottom: 10px; }
    .radio-group label { display: inline-block; margin-right: 15px; }
    button { padding: 10px 15px; margin: 5px; background-color: #00557f; color: white; border: none; border-radius: 5px; cursor: pointer; }
    #results { margin-top: 30px; padding: 15px; border: 1px solid #ccc; background: #fff; }
    #timestamp { margin-top: 10px; font-size: 0.9em; color: #555; }
    #backButton { display: none; margin-top: 20px; }
    .met, .not-met { margin-left: 10px; font-weight: bold; }
    .met { color: green; }
    .not-met { color: red; }
    @media print {
      body { background: white; color: black; font-size: 12px; margin: 20mm; }
      .logo-bar, form button, #backButton { display: none; }
      header, footer { display: block; text-align: center; font-size: 0.9em; margin: 5px 0; }
    }
    header, footer { display: none; }
  </style>
</head>
<body>
<header>Confidential - Study Screening Tool</header>
<div class="logo-bar">
  <img src="images/logo1.png" alt="Logo 1">
  <img src="images/logo2.png" alt="Logo 2">
</div>
<h1>ARPEGGIO Stroke Trial Eligibility Checklist</h1>
<form id="eligibilityForm" name="eligibilityForm">
  <!-- ───────────── Inclusion ───────────── -->
  <div class="section">
    <h2>Inclusion Criteria</h2>

    <div class="radio-group">
      <label>1. Age ≥ 18 years.
        <span class="choice"><input type="radio" name="inclusion1" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="inclusion1" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>2. Body weight &lt; 150 kg.
        <span class="choice"><input type="radio" name="inclusion2" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="inclusion2" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>3. AIS intended for immediate endovascular treatment.
        <span class="choice"><input type="radio" name="inclusion3" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="inclusion3" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>4. Disabling stroke: NIHSS ≥ 6 at randomization.
        <span class="choice"><input type="radio" name="inclusion4" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="inclusion4" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>5. Confirmed symptomatic ICA, M1, or M2 occlusion.
        <span class="choice"><input type="radio" name="inclusion5" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="inclusion5" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>6. Onset-to-randomization ≤ 24 h.
        <span class="choice"><input type="radio" name="inclusion6" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="inclusion6" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>7. Planned EVT with an FDA-approved device.
        <span class="choice"><input type="radio" name="inclusion7" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="inclusion7" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>8. Pre-AIS mRS 0–2, living independently.
        <span class="choice"><input type="radio" name="inclusion8" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="inclusion8" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>9. Treating team & family committed to full medical support.
        <span class="choice"><input type="radio" name="inclusion9" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="inclusion9" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>10. Signed informed consent from subject or LAR.
        <span class="choice"><input type="radio" name="inclusion10" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="inclusion10" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>11. Female: surgically sterile, post-menopause, or using contraception.
        <span class="choice"><input type="radio" name="inclusion11" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="inclusion11" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>12. Male: sterile, using acceptable birth control, or abstinent.
        <span class="choice"><input type="radio" name="inclusion12" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="inclusion12" value="no"> No</span>
      </label>
    </div>
  </div>

  <!-- ───────────── Exclusion ───────────── -->
  <div class="section">
    <h2>Exclusion Criteria</h2>

    <div class="radio-group">
      <label>1. Acute ICH on qualifying imaging.
        <span class="choice"><input type="radio" name="exclusion1" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="exclusion1" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>2. Poor or no collateral circulation (investigator judgment).
        <span class="choice"><input type="radio" name="exclusion2" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="exclusion2" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>3. ASPECTS 0–4.
        <span class="choice"><input type="radio" name="exclusion3" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="exclusion3" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>4. IV thrombolysis within prior 24 h.
        <span class="choice"><input type="radio" name="exclusion4" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="exclusion4" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>5. Intent to use non-FDA-approved EVT device.
        <span class="choice"><input type="radio" name="exclusion5" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="exclusion5" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>6. Planned intra-arterial thrombolytic therapy.
        <span class="choice"><input type="radio" name="exclusion6" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="exclusion6" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>7. Severe contrast allergy / contraindication to iodinated contrast.
        <span class="choice"><input type="radio" name="exclusion7" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="exclusion7" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>8. Suspected chronic occlusion or dissection suggesting poor EVT success.
        <span class="choice"><input type="radio" name="exclusion8" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="exclusion8" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>9. Arterial condition preventing device use (e.g., aortic dissection, carotid stent).
        <span class="choice"><input type="radio" name="exclusion9" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="exclusion9" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>10. End-stage kidney disease.
        <span class="choice"><input type="radio" name="exclusion10" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="exclusion10" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>11. Anticoagulant-specific exclusions not met (see protocol).
        <span class="choice"><input type="radio" name="exclusion11" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="exclusion11" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>12. Metastatic malignancy with poor prognosis.
        <span class="choice"><input type="radio" name="exclusion12" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="exclusion12" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>13. Comorbidities precluding neuro assessment or follow-up.
        <span class="choice"><input type="radio" name="exclusion13" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="exclusion13" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>14. Clinical-trial participation within 30 days.
        <span class="choice"><input type="radio" name="exclusion14" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="exclusion14" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>15. Prior SCP-CL-0001/2/3 trial drug exposure.
        <span class="choice"><input type="radio" name="exclusion15" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="exclusion15" value="no"> No</span>
      </label>
    </div>

    <div class="radio-group">
      <label>16. Moderate/severe hypotension (SBP &lt; 90 mmHg) needing intervention.
        <span class="choice"><input type="radio" name="exclusion16" value="yes"> Yes</span>
        <span class="choice"><input type="radio" name="exclusion16" value="no"> No</span>
      </label>
    </div>
  </div>

  <!-- ───────────── Buttons ───────────── -->
  <button type="button" onclick="checkEligibility()">Check Eligibility</button>
  <button type="button" onclick="printResults()">Print Results</button>
  <button type="button" onclick="downloadPDF()">Download as PDF</button>
</form>

<div id="results"></div>
<div id="timestamp"></div>
<button id="backButton" onclick="restoreForm()">Back to Form</button>
<footer>Confidential - Generated for Internal Use Only</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
function checkEligibility() {
  const form = document.forms["eligibilityForm"];
  let inclusionMet = true;
  let exclusionViolated = false;
  let resultHtml = '<h2>Eligibility Result</h2><ul>';

  for (let i = 1; i <= 12; i++) {
    const val = form[`inclusion${i}`]?.value;
    resultHtml += `<li>Inclusion ${i}: ${val === 'yes' ? '<span class="met">Met</span>' : '<span class="not-met">Not Met</span>'}`;
    if (val !== 'yes') inclusionMet = false;
  }
  for (let i = 1; i <= 16; i++) {
    const val = form[`exclusion${i}`]?.value;
    resultHtml += `<li>Exclusion ${i}: ${val === 'no' ? '<span class="met">Not Present</span>' : '<span class="not-met">Present</span>'}`;
    if (val === 'yes') exclusionViolated = true;
  }

  resultHtml += '</ul>';
  resultHtml += `<h3>${inclusionMet && !exclusionViolated ? '<span style="color:green">Eligible for Study</span>' : '<span style="color:red">Not Eligible for Study</span>'}</h3>`;
  document.getElementById("results").innerHTML = resultHtml;

  const now = new Date();
  const timestamp = now.toLocaleString();
  document.getElementById("timestamp").innerText = `Results generated on: ${timestamp}`;
}

function printResults() {
  window.print();
}

async function downloadPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  const header = "Confidential - Study Screening Tool";
  const footer = "Confidential - Generated for Internal Use Only";
  const resultsText = document.getElementById("results").innerText;
  const timestampText = document.getElementById("timestamp").innerText;
  doc.text(header, 105, 10, { align: "center" });
  const lines = doc.splitTextToSize(resultsText + "\n\n" + timestampText, 180);
  doc.text(lines, 10, 20);
  doc.text(footer, 105, 280, { align: "center" });

  const now = new Date();
  const dateString = now.toISOString().slice(0, 10);
  const timeString = now.toTimeString().slice(0,5).replace(":", "");
  const filename = `eligibility_${dateString}_${timeString}.pdf`;
  doc.save(filename);
}

function restoreForm() {
  location.reload();
}
</script>
</body>
</html>
